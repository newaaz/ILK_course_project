<%= form_with(model: @activity, class: 'vstack gap-4') do |f| %>
  <div id="forms_errors">
    <%= render 'shared/errors', object: f.object %>
  </div>

    <!-- base info -->
  <div class="card shadow">  
    <div class="card-header border-bottom">
      <h5 class="mb-0">Основная информация</h5>
    </div>

    <div class="card-body">
		  <div class="row g-3">
        <div class="col-md-5">        
          <%= f.label :title, class: 'form-label' %>*     
          <%= f.text_field :title, class: 'form-control' %>
        </div>

        <div class="col-md-3">
          <%= f.label :category_title, class: 'form-label' %>*     
          <%= f.collection_select :category_title, Activity::ACTIVITY_CATEGORIES, :to_s, :to_s, { prompt: "Выбрать..." }, class:"form-select" %>
        </div>

        <div class="col-md-2">
          <%= f.label :price, class: 'form-label' %> <span class="small text-secondary">(необязательно)</span>        
          <div class="input-group"> 
            <%= f.number_field :price, class: 'form-control', min: 50 %>
            <span class="input-group-text">&#8381;</span>
          </div> 
        </div>

        <div class="col-md-2">        
          <%= f.label :price_type, class: 'form-label' %>*     
          <%= f.text_field :price_type, class: 'form-control' %>
        </div>

        <div class="col-12">
          <%= f.label :description, class: 'form-label' %>
          <%= f.text_area :description, rows: 6, class: 'form-control' %>
        </div>

        <div class="col-12">
          <%= f.label :additional_info, class: 'form-label' %>
          <%= f.text_area :description, rows: 6, class: 'form-control' %>
        </div>


    
        <%= f.hidden_field :listing_type, value: params[:listing_type] %>
      </div>
    </div>
  </div>

  <div class="card shadow">  
    <div class="card-header border-bottom">
      <h5 class="mb-0">К каким населёным пунктам относится:</h5>
    </div>

    <div class="card-body">
		  <div class="row g-3">        
        <div class="col-12">
          <% Town.find_each do |town| %>
            <div class="d-inline ms-3">
              <%= f.check_box :town_ids, { multiple: true, checked: f.object.towns&.include?(town.id.to_s), class: 'form-check-input' }, town.id, nil %>
              <%= f.label town.name, for: "activity_town_ids_#{town.id}",  class: 'form-check-label mb-4' %>
            </div>  
          <% end %>
        </div>

        <div class="col-md-6">
          <%= f.label :address, class: 'form-label' %>* <span class="small text-secondary">(если есть. Необязательно)</span>     
          <%= f.text_field :address, class: 'form-control' %>
        </div>    
      </div>
    </div>
  </div>

  <%= render 'geolocations/map_fields', f: f %>


  <div class="row g-3">
    <div class="col-md-8">
      <%= render 'carrierwave_imagable/imagable_fields', f: f %>
    </div>

    <div class="col-md-4 ">  
      <%= render 'properties/templates/contacts_fields', f: f %>
    </div> 
  </div>  

  <div class="text-center">
    <%= f.submit f.object.new_record? ? "Разместить объявление" : "Сохранить изменения", class:"btn btn-primary my-4" %>
	</div>
<% end %>

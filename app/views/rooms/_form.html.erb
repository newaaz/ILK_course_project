<%= form_with model:[@property, @room], class: 'vstack gap-4' do |f| %>
  <div id="forms_errors">
    <%= render 'shared/errors', object: f.object %>
  </div>

  <div class="form-group mb-2">
    <%= f.label :title, class: 'form-label' %>        
    <%= f.text_field :title, class: 'form-control' %>
  </div>

  <div class="form-group mb-2">
    <%= f.label :guest_base_count %>       
    <%= f.number_field :guest_base_count, class: 'form-control' %>
  </div>

  <div class="form-group mb-2">
    <%= f.label :guest_max_count %>       
    <%= f.number_field :guest_max_count, class: 'form-control' %>
  </div>

  <%= render 'attached_images/imagable_fields', f: f %>

  <h4>Prices:</h4>
  <div data-controller="nested-prices">

    <template data-target='nested-prices.template'>
      <%= f.fields_for :prices, Price.new, child_index: 'NEW_RECORD' do |price_form| %>
        <%= render 'prices/form', f: price_form %>
      <% end %>
    </template>

    <%= f.fields_for :prices do |price_form| %>
      <%= render 'prices/form', f: price_form %>
    <% end %>

    <div data-target="nested-prices.add_price">
      <%= link_to "Add Price", "#", data: { action:"click->nested-prices#add_association" } %>
    </div>

  </div>

  <div class="text-center">
    <%= f.submit f.object.new_record? ? "Добавить Номер" : "Сохранить изменения",class:"btn btn-primary my-4" %>
  </div>
<% end %>
